# Capítulo 1: Apresentação do Projeto

## 1.1 Contexto e Enquadramento

Este documento apresenta o trabalho desenvolvido no âmbito da disciplina de **Desenvolvimento Web I** da Licenciatura em Informática na **Universidade da Maia (UMAIA)**, correspondente ao **Momento 3 de Avaliação Contínua** do ano letivo 2025/26.

O projeto consiste no desenvolvimento de um sistema completo de gestão de manutenção de automóveis, implementado com recurso a tecnologias modernas de desenvolvimento web, seguindo uma **arquitetura Code-first** baseada em serviços REST.

### 1.1.1 Evolução ao Longo dos Momentos

Este projeto representa a terceira iteração do trabalho da disciplina:

#### Momento 1: Estudo de API REST

- **Objetivo:** Análise teórica de uma API REST pública
- **Entregáveis:** Apresentação + Postman Collection
- **Aprendizagens:** Compreensão de REST, verbos HTTP, autenticação

#### Momento 2: Design-first com Node.js

- **Objetivo:** Desenvolver API REST usando abordagem Design-first
- **Tecnologias:** Node.js + Express + MySQL
- **Abordagem:** OpenAPI escrito manualmente primeiro, código depois
- **Containers:** 2 (MySQL + Node.js)

#### Momento 3: Code-first com LoopBack 4 (este projeto)

- **Objetivo:** Desenvolver API REST com LoopBack 4 + Backoffice React-Admin
- **Abordagem:** **Code-first** - código gera OpenAPI automaticamente
- **Containers:** 3 (MySQL + API LoopBack + Backoffice React-Admin)
- **Novidade:** Interface visual de administração

### 1.1.2 Objetivos Gerais

O objetivo principal deste trabalho é demonstrar a aplicação prática dos conhecimentos adquiridos através do desenvolvimento de uma aplicação web completa, nomeadamente:

1. **Construir uma API REST** robusta utilizando **LoopBack 4** com abordagem Code-first
2. **Desenvolver uma interface de backoffice** funcional com **React-Admin**
3. **Implementar relações complexas** (1:N e M:N) entre recursos
4. **Aplicar boas práticas** de desenvolvimento web e arquitetura de software
5. **Containerizar a aplicação** com **Docker** (multi-container)
6. **Gerar documentação OpenAPI 3.0** automaticamente

---

## 1.2 Objetivos Específicos

### 1.2.1 Requisitos Obrigatórios

De acordo com o enunciado do Momento 3, os seguintes requisitos mínimos obrigatórios foram implementados:

| #   | Requisito                          | Status                            | Detalhes                                |
| --- | ---------------------------------- | --------------------------------- | --------------------------------------- |
| 1   | Arquitetura de serviços REST       | ✅ Implementado                   | API REST completa                       |
| 2   | Utilização de 4+ verbos HTTP       | ✅ 5 verbos                       | GET, POST, PATCH, PUT, DELETE           |
| 3   | Mínimo de 4 recursos diferentes    | ✅ 5 recursos                     | Owners, Vehicles, ServiceTypes, ServiceRecords, Mechanics |
| 4   | Relação 1:n entre recursos         | ✅ Múltiplas                      | Owner→Vehicles, Vehicle→ServiceRecords, ServiceType→ServiceRecords |
| 5   | Representações em JSON             | ✅ Todas as respostas             | Content-Type: application/json          |
| 6   | Documentação OpenAPI 3.0           | ✅ Gerada automaticamente         | Disponível em `/explorer`               |
| 7   | Collection Postman                 | ✅ 46 requests                    | Collection completa disponível          |
| 8   | MySQL como SGBD                    | ✅ MySQL 8.0                      | Container dedicado                      |
| 9   | Cliente de backoffice              | ✅ React-Admin                    | Interface completa com CRUD             |
| 10  | Docker multi-container             | ✅ 3 containers                   | MySQL, API, Backoffice                  |

### 1.2.2 Funcionalidades Valorizadas Implementadas

Adicionalmente, foram implementadas as seguintes funcionalidades valorizadas:

- ✅ **Filtros através de parâmetros HTTP** - Sistema de filtros built-in do LoopBack

**Nota sobre relação M:N:** A base de dados possui uma tabela junction `service_record_mechanics` que implementa a relação M:N entre Service Records e Mechanics. No entanto, esta relação não está exposta através da API LoopBack (não foi implementado o decorator `@hasManyThrough`). A estrutura da base de dados suporta a relação, mas o acesso é feito diretamente via SQL.

### 1.2.3 Funcionalidades Extras

Além dos requisitos obrigatórios e valorizados, implementámos:

- ✅ **Endpoint `/count`** em todos os recursos
- ✅ **155+ registos** de dados de teste (30+ por tabela)
- ✅ **Healthchecks** configurados nos containers Docker
- ✅ **README.md** completo com instruções de instalação
- ✅ **Imagens Docker Hub** públicas para distribuição

---

## 1.3 Âmbito do Projeto

### 1.3.1 Recursos Implementados

O sistema desenvolvido gere 5 recursos principais:

#### 1. Owners (Proprietários)

Gestão de proprietários de veículos com informação de contacto.

**Campos:**
- ID (auto-incremento)
- Nome
- Email (único)
- Telefone

**Relações:**
- 1:N com Vehicles (um proprietário tem vários veículos)

**Operações:**
- Criar, listar, visualizar, atualizar, eliminar proprietários
- Filtrar por nome ou email
- Contar total de proprietários
- Ver veículos de um proprietário

#### 2. Vehicles (Veículos)

Registo de veículos associados a proprietários.

**Campos:**
- ID (auto-incremento)
- Owner ID (foreign key)
- Marca
- Modelo
- Matrícula (única)
- Ano

**Relações:**
- N:1 com Owners (pertence a um proprietário)
- 1:N com ServiceRecords (tem vários registos de manutenção)

**Operações:**
- Criar, listar, visualizar, atualizar, eliminar veículos
- Filtrar por marca, modelo ou proprietário
- Contar veículos totais ou por proprietário
- Ver histórico de manutenções

#### 3. Service Types (Tipos de Serviço)

Catálogo de tipos de serviço de manutenção oferecidos.

**Campos:**
- ID (auto-incremento)
- Nome (ex: "Mudança de Óleo", "Revisão dos 10.000 km")
- Descrição

**Relações:**
- 1:N com ServiceRecords (usado em vários registos)

**Operações:**
- Criar, listar, visualizar, atualizar, eliminar tipos de serviço
- Filtrar por nome
- Ver registos que usam este tipo de serviço

#### 4. Service Records (Registos de Manutenção)

Histórico de manutenções realizadas em veículos.

**Campos:**
- ID (auto-incremento)
- Vehicle ID (foreign key)
- Service Type ID (foreign key)
- Data do serviço
- Quilometragem
- Custo

**Relações:**
- N:1 com Vehicles (pertence a um veículo)
- N:1 com ServiceTypes (é de um tipo específico)
- M:N com Mechanics (pode ter vários mecânicos)

**Operações:**
- Criar, listar, visualizar, atualizar, eliminar registos
- Filtrar por veículo, tipo, data ou custo
- Associar múltiplos mecânicos a um registo
- Calcular custos totais por veículo

#### 5. Mechanics (Mecânicos)

Gestão de mecânicos que realizam os serviços.

**Campos:**
- ID (auto-incremento)
- Nome
- Especialização
- Telefone
- Email (único)

**Relações:**
- M:N com ServiceRecords (trabalha em vários registos, cada registo pode ter vários mecânicos)

**Operações:**
- Criar, listar, visualizar, atualizar, eliminar mecânicos
- Filtrar por especialização
- Ver histórico de trabalhos realizados

### 1.3.2 Funcionalidades do Sistema

#### Para Gestão de Frota

- Registar todos os veículos da frota
- Associar veículos a proprietários
- Consultar informação de cada veículo

#### Para Controlo de Manutenções

- Registar todas as manutenções realizadas
- Associar tipo de serviço a cada manutenção
- Registar quilometragem e custos
- Associar mecânicos responsáveis

#### Para Gestão de Custos

- Ver custos por veículo
- Ver custos por tipo de serviço
- Filtrar registos por intervalo de custos
- Calcular totais e médias

#### Para Gestão de Recursos Humanos

- Cadastro completo de mecânicos
- Registo de especializações
- Histórico de trabalhos de cada mecânico

---

## 1.4 Equipa de Desenvolvimento

### Grupo 33 - inf25dw1g33

O projeto foi desenvolvido por um grupo de 3 elementos:

| Nome            | Nº Aluno | GitHub                                               |
| --------------- | -------- | ---------------------------------------------------- |
| César Ramos     | A035224  | [@devCesarRamos](https://github.com/devCesarRamos)   |
| Gonçalo Cidras  | A046393  | [@devCidras](https://github.com/devCidras)           |
| Jorge Espogeira | A046409  | [@JorgeEspogeira](https://github.com/JorgeEspogeira) |

**Organização GitHub:** [inf25dw1g33](https://github.com/inf25dw1g33)

**Repositório Docker Hub:** [inf25dw1g33](https://hub.docker.com/u/inf25dw1g33)

---

## 1.5 Metodologia de Desenvolvimento

### 1.5.1 Abordagem Code-first

Ao contrário do Momento 2 (Design-first), este projeto seguiu a abordagem **Code-first**:

#### Design-first (M2)
1. Escrever especificação OpenAPI manualmente
2. Implementar código que siga a especificação
3. Configurar routes manualmente
4. Escrever validações manualmente

#### Code-first (M3)
1. Escrever código com decorators TypeScript
2. LoopBack gera OpenAPI automaticamente
3. CRUD gerado automaticamente
4. Validações built-in

**Vantagens da abordagem Code-first:**
- ✅ Desenvolvimento mais rápido (1 semana vs 3 semanas do M2)
- ✅ Menos código boilerplate
- ✅ OpenAPI sempre sincronizado com código
- ✅ Type-safety com TypeScript
- ✅ Relações geridas automaticamente

### 1.5.2 Processo de Desenvolvimento

O desenvolvimento seguiu estas etapas:

1. **Planeamento** (Semana 1)
   - Definição dos recursos
   - Modelo de dados e relações
   - Distribuição de tarefas

2. **Implementação Backend** (Semana 2)
   - Configuração LoopBack 4
   - Criação de models com `lb4 model`
   - Configuração datasource MySQL
   - Geração de controllers com `lb4 controller`
   - Implementação de relações 1:N e M:N

3. **Base de Dados** (Semana 2)
   - Schema SQL com relações
   - Script de dados de teste (155+ registos)
   - Configuração de foreign keys

4. **Implementação Frontend** (Semana 3)
   - Configuração React-Admin
   - Criação de recursos CRUD
   - DataProvider personalizado
   - Interface de navegação

5. **Docker** (Semana 3)
   - Dockerfiles para cada serviço
   - Docker Compose com 3 containers
   - Healthchecks e dependências
   - Push para Docker Hub

6. **Testes e Documentação** (Semana 4)
   - Collection Postman com 46 requests
   - Testes de todos os endpoints
   - Documentação em Markdown
   - README com instruções

### 1.5.3 Ferramentas Utilizadas

#### Desenvolvimento

- **Visual Studio Code** - Editor principal com extensões:
  - LoopBack 4
  - ESLint
  - Prettier
  - Docker
- **DataGrip** - Gestão da base de dados MySQL
- **Postman** - Testes de API
- **Git** - Controlo de versões

#### Colaboração

- **GitHub** - Repositório e gestão de código
- **Discord** - Comunicação da equipa

#### DevOps

- **Docker Desktop** - Ambiente de desenvolvimento local
- **Docker Hub** - Registry público de imagens

#### Inteligência Artificial

- **Claude AI** - Auxílio em estruturação de código LoopBack
- **GitHub Copilot** - Autocompletar código TypeScript/React

---

## 1.6 Estrutura do Relatório

Este relatório está organizado em quatro capítulos principais:

### **Capítulo 1: Apresentação do Projeto** (este capítulo)

Contexto, objetivos, equipa, metodologia Code-first e âmbito do sistema.

### **Capítulo 2: Recursos**

Descrição detalhada da arquitetura, modelo de dados, relações entre recursos, endpoints da API e especificação OpenAPI.

### **Capítulo 3: Produto**

Implementação técnica com LoopBack 4 e React-Admin, funcionalidades do backoffice, tecnologias utilizadas e processo de deployment com Docker.

### **Capítulo 4: Apresentação e Conclusões**

Demonstração do sistema funcionando, resultados obtidos, comparação M2 vs M3, desafios enfrentados e conclusões finais.

---

## 1.7 Diferenças M2 vs M3

### Resumo Comparativo

| Aspecto              | M2 (Design-first)           | M3 (Code-first)              |
| -------------------- | --------------------------- | ---------------------------- |
| **Framework**        | Express (puro)              | LoopBack 4                   |
| **Abordagem**        | OpenAPI → Código            | Código → OpenAPI             |
| **CRUD**             | Manual                      | Gerado automaticamente       |
| **Documentação**     | Escrita à mão               | Gerada automaticamente       |
| **Validações**       | Manuais                     | Built-in com decorators      |
| **Relações**         | SQL queries manuais         | ORM com decorators           |
| **Interface**        | Não implementada            | React-Admin                  |
| **Containers**       | 2 (MySQL + Node.js)         | 3 (MySQL + API + Backoffice) |
| **Tempo Desenvolvimento** | ~3 semanas            | ~2 semanas                   |
| **Linhas de Código** | ~2000 LOC                   | ~800 LOC                     |

---

## 1.8 Referências Iniciais

### Documentação Oficial

- [LoopBack 4 Documentation](https://loopback.io/doc/en/lb4/)
- [React-Admin Documentation](https://marmelab.com/react-admin/Documentation.html)
- [OpenAPI Specification 3.0](https://swagger.io/specification/)
- [Docker Documentation](https://docs.docker.com/)
- [MySQL 8.0 Reference Manual](https://dev.mysql.com/doc/refman/8.0/en/)

### Recursos de Aprendizagem

- [REST API Best Practices](https://restfulapi.net/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
- [React Documentation](https://react.dev/learn)
- [Code-first vs Design-first APIs](https://nordicapis.com/design-first-or-code-first-whats-the-best-approach-to-api-development/)

### Repositórios e Exemplos

- [LoopBack 4 Examples](https://github.com/loopbackio/loopback-next/tree/master/examples)
- [React-Admin Examples](https://github.com/marmelab/react-admin/tree/master/examples)
- [LoopBack 4 Relations Guide](https://loopback.io/doc/en/lb4/Relations.html)

---

**Próximo:** [Capítulo 2 - Recursos →](c2.md)

[← Voltar ao README principal](../README.md)
