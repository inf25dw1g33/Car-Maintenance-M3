# Capítulo 4: Apresentação e Conclusões

## 4.1 Demonstração do Sistema

### 4.1.1 Acesso ao Sistema

O sistema pode ser acedido através dos seguintes URLs:

| Componente       | URL                            | Descrição                       |
| ---------------- | ------------------------------ | ------------------------------- |
| **API REST**     | http://localhost:3000          | Backend LoopBack 4              |
| **API Explorer** | http://localhost:3000/explorer | Documentação interativa OpenAPI |
| **Backoffice**   | http://localhost:3001          | Interface React-Admin           |
| **MySQL**        | localhost:3306                 | Base de dados (acesso interno)  |

### 4.1.2 Cenário de Demonstração

#### Passo 1: Criar um Cliente

```http
POST http://localhost:3000/api/customers
Content-Type: application/json

{
  "name": "António Costa",
  "email": "antonio.costa@example.com",
  "phone": "+351 934567890",
  "address": "Rua da Liberdade, 100, 4000-000 Porto"
}
```

**Resposta:**

```json
{
  "id": 1,
  "name": "António Costa",
  "email": "antonio.costa@example.com",
  "phone": "+351 934567890",
  "address": "Rua da Liberdade, 100, 4000-000 Porto",
  "created_at": "2026-01-06T15:30:00.000Z",
  "updated_at": "2026-01-06T15:30:00.000Z"
}
```

#### Passo 2: Registar um Veículo

```http
POST http://localhost:3000/api/vehicles
Content-Type: application/json

{
  "customer_id": 1,
  "brand": "Toyota",
  "model": "Corolla",
  "year": 2020,
  "license_plate": "AB-12-CD",
  "vin": "1HGBH41JXMN109186",
  "color": "Prateado"
}
```

#### Passo 3: Criar um Agendamento

```http
POST http://localhost:3000/api/appointments
Content-Type: application/json

{
  "vehicle_id": 1,
  "workshop_id": 1,
  "date": "2026-01-15",
  "time": "10:00:00",
  "status": "pending",
  "notes": "Revisão dos 50.000 km"
}
```

#### Passo 4: Adicionar Serviços ao Agendamento

```http
POST http://localhost:3000/api/appointments/1/services
Content-Type: application/json

{
  "serviceId": 1,
  "price": 45.00
}
```

#### Passo 5: Consultar Histórico do Veículo

```http
GET http://localhost:3000/api/vehicles/1?filter={"include":["maintenances","appointments"]}
```

**Resposta:**

```json
{
  "id": 1,
  "customer_id": 1,
  "brand": "Toyota",
  "model": "Corolla",
  "year": 2020,
  "license_plate": "AB-12-CD",
  "vin": "1HGBH41JXMN109186",
  "color": "Prateado",
  "maintenances": [...],
  "appointments": [
    {
      "id": 1,
      "date": "2026-01-15",
      "time": "10:00:00",
      "status": "pending",
      "services": [...]
    }
  ]
}
```

### 4.1.3 Demonstração no Backoffice

**1. Dashboard**

- Visualização de estatísticas gerais
- Números de clientes, veículos e agendamentos
- Gráficos de manutenções por mês

**2. Lista de Clientes**

- Pesquisa por nome ou email
- Filtros avançados
- Exportação de dados
- Ações em massa

**3. Detalhes do Cliente**

- Informação completa do cliente
- Lista de veículos associados
- Histórico de manutenções
- Agendamentos futuros

**4. Gestão de Agendamentos**

- Criação de novo agendamento
- Seleção de veículo e oficina
- Adição de múltiplos serviços
- Cálculo automático do total
- Mudança de estado

**5. Histórico de Manutenções**

- Visualização cronológica
- Filtros por veículo ou data
- Custos totais
- Exportação de relatórios

---

## 4.2 Resultados Obtidos

### 4.2.1 Requisitos Cumpridos

Todos os requisitos obrigatórios foram implementados com sucesso:

| #   | Requisito              | Status | Observações              |
| --- | ---------------------- | ------ | ------------------------ |
| 1   | Arquitetura REST       | ✅     | Totalmente implementada  |
| 2   | 4 verbos HTTP (CRUD)   | ✅     | GET, POST, PUT, DELETE   |
| 3   | Mínimo 4 recursos      | ✅     | 6 recursos implementados |
| 4   | Relação 1:n            | ✅     | Múltiplas relações       |
| 5   | Representações JSON    | ✅     | Todas as respostas       |
| 6   | Documentação OpenAPI   | ✅     | Gerada automaticamente   |
| 7   | Collection Postman     | ✅     | Completa e testada       |
| 8   | MySQL como SGBD        | ✅     | MySQL 8.0                |
| 9   | Cliente backoffice     | ✅     | React-Admin funcional    |
| 10  | Docker multi-container | ✅     | 3 containers             |

**Funcionalidades Valorizadas:**

- ✅ Filtros HTTP - Implementados em todos os recursos
- ✅ Relação m:n - Appointments ↔ Services

### 4.2.2 Recursos Implementados

| Recurso      | Endpoints | Relações                                                         | Validações                       |
| ------------ | --------- | ---------------------------------------------------------------- | -------------------------------- |
| Customers    | 7         | → Vehicles (1:n)                                                 | Email único, campos obrigatórios |
| Vehicles     | 9         | → Customer (n:1)<br>→ Maintenances (1:n)<br>→ Appointments (1:n) | Matrícula única, ano válido      |
| Workshops    | 7         | → Appointments (1:n)                                             | Email único, campos obrigatórios |
| Services     | 7         | ↔ Appointments (m:n)                                             | Preço positivo, categoria válida |
| Appointments | 11        | → Vehicle (n:1)<br>→ Workshop (n:1)<br>↔ Services (m:n)          | Data futura, estado válido       |
| Maintenances | 7         | → Vehicle (n:1)                                                  | Custo positivo, data válida      |

---

## 4.3 Desafios e Soluções

### 4.3.1 Desafios Técnicos

#### **1. Relação Many-to-Many no LoopBack**

**Desafio:** Implementar a relação m:n entre Appointments e Services com campos adicionais na tabela de junção.

**Solução:**

- Criação do modelo `AppointmentService` como entidade própria
- Utilização de `hasMany through` nas relações
- Controller customizado para gerir a adição/remoção de serviços

#### **2. Integração React-Admin com LoopBack**

**Desafio:** O data provider padrão do React-Admin não é compatível com o formato de filtros do LoopBack.

**Solução:**

- Desenvolvimento de data provider customizado
- Mapeamento de filtros do React-Admin para LoopBack Query
- Implementação de paginação e ordenação

#### **3. Docker Networking**

**Desafio:** Comunicação entre containers e ordem de inicialização.

**Solução:**

- Configuração de rede bridge dedicada
- Health checks no MySQL
- `depends_on` com condições de saúde

#### **4. CORS no Desenvolvimento**

**Desafio:** Erros CORS ao aceder à API do frontend.

**Solução:**

```typescript
// application.ts
this.bind(RestBindings.CORS).to({
  origin: '*',
  methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',
  credentials: true,
});
```

### 4.3.2 Desafios de Gestão

#### **1. Coordenação de Equipa**

**Desafio:** Trabalho remoto e diferentes horários de disponibilidade.

**Solução:**

- Reuniões semanais agendadas
- Comunicação assíncrona via Discord

#### **2. Aprendizagem de Novas Tecnologias**

**Desafio:** Equipa sem experiência prévia em LoopBack e React-Admin.

**Solução:**

- Estudo da documentação oficial
- Tutoriais e exemplos práticos
- Pair programming nas partes mais complexas
- Utilização de IA (Claude, Copilot) como assistência

---

## 4.4 Lições Aprendidas

### 4.4.1 Técnicas

1. **LoopBack 4 é poderoso mas tem curva de aprendizagem**

   - A abordagem Code-first acelera o desenvolvimento
   - A documentação OpenAPI automática é uma grande vantagem
   - O sistema de decorators requer atenção aos detalhes

2. **React-Admin simplifica muito o desenvolvimento de backoffice**

   - Componentes prontos poupam muito tempo
   - Customização é possível mas requer conhecimento de Material-UI
   - O data provider é crítico para integração

3. **Docker é essencial para desenvolvimento moderno**

   - Garante ambientes consistentes
   - Simplifica deployment
   - Facilita colaboração

4. **TypeScript melhora a qualidade do código**
   - Detecção de erros em tempo de desenvolvimento
   - Melhor autocompletar no IDE
   - Documentação implícita através de tipos

### 4.4.2 Gestão de Projeto

1. **Planeamento inicial é crucial**

   - Definir bem o modelo de dados poupa retrabalho
   - Documentar decisões arquiteturais ajuda a equipa

2. **Versionamento desde o início**

   - Git branches para features
   - Pull requests para revisão de código
   - Commits descritivos

3. **Testes contínuos**
   - Testar endpoints à medida que são desenvolvidos
   - Collection Postman como documentação viva

---

## 4.5 Conclusões

### 4.5.1 Objetivos Alcançados

Este projeto atingiu todos os objetivos propostos no enunciado do trabalho:

✅ **Desenvolvimento de uma API REST funcional** com LoopBack 4, seguindo boas práticas e padrões da indústria.

✅ **Criação de uma interface de backoffice** completa e intuitiva usando React-Admin, que permite gerir todos os recursos do sistema.

✅ **Implementação de um modelo de dados robusto** com relações 1:n e m:n, garantindo integridade referencial.

✅ **Containerização completa da aplicação** com Docker, facilitando deployment e garantindo consistência entre ambientes.

✅ **Documentação abrangente** incluindo OpenAPI, Postman Collection e este relatório detalhado.

### 4.5.2 Conhecimentos Aplicados

O desenvolvimento deste projeto permitiu aplicar e consolidar conhecimentos em:

- **Arquiteturas REST** e princípios de design de APIs
- **TypeScript** e programação orientada a objetos
- **Node.js** e frameworks modernos (LoopBack 4)
- **React** e bibliotecas de UI (React-Admin, Material-UI)
- **Bases de dados relacionais** (MySQL) e ORM
- **Docker** e containerização
- **Git** e colaboração em equipa
- **Documentação técnica** e boas práticas

### 4.5.3 Reflexão Final

Este trabalho representou um desafio significativo mas extremamente enriquecedor. A combinação de tecnologias modernas (LoopBack 4 e React-Admin) com requisitos bem definidos permitiu desenvolver uma aplicação completa e funcional.

Os principais pontos positivos foram:

1. **Aprendizagem de novas tecnologias** - LoopBack 4 e React-Admin eram novos para a equipa
2. **Trabalho em equipa** - Coordenação eficaz apesar das limitações temporais
3. **Resultado funcional** - Sistema totalmente operacional e pronto para demonstração
4. **Documentação completa** - Facilita manutenção e evolução futura

As principais dificuldades foram:

1. **Curva de aprendizagem** - Tecnologias novas requerem tempo de adaptação
2. **Gestão de tempo** - Conciliar com outras disciplinas
3. **Debug de integrações** - Problemas entre frontend, backend e base de dados

Apesar dos desafios, o resultado final é um sistema funcional, bem documentado e pronto para evoluir. A experiência adquirida será valiosa para projetos futuros, tanto académicos como profissionais.

---

## 4.6 Referências

### Documentação Oficial

1. LoopBack 4 Documentation - https://loopback.io/doc/en/lb4/
2. React-Admin Documentation - https://marmelab.com/react-admin/
3. MySQL 8.0 Reference Manual - https://dev.mysql.com/doc/refman/8.0/
4. Docker Documentation - https://docs.docker.com/
5. OpenAPI Specification 3.0 - https://swagger.io/specification/

### Tutoriais e Guias

6. LoopBack 4 Tutorial - https://loopback.io/doc/en/lb4/todo-tutorial.html
7. React-Admin Tutorial - https://marmelab.com/react-admin/Tutorial.html
8. REST API Best Practices - https://restfulapi.net/
9. TypeScript Handbook - https://www.typescriptlang.org/docs/handbook/

### Ferramentas

10. Visual Studio Code - https://code.visualstudio.com/
11. Postman - https://www.postman.com/
12. Docker Hub - https://hub.docker.com/
13. GitHub - https://github.com/

### Recursos de Aprendizagem

14. MDN Web Docs - https://developer.mozilla.org/
15. Stack Overflow - https://stackoverflow.com/
16. GitHub LoopBack Examples - https://github.com/loopbackio/loopback-next/tree/master/examples

---

## 4.7 Anexos

### Anexo A: Comandos Úteis

**Docker:**

```bash
# Iniciar serviços
docker-compose up -d

# Parar serviços
docker-compose down

# Ver logs
docker-compose logs -f api

# Rebuild imagens
docker-compose build --no-cache
```

**API LoopBack:**

```bash
# Criar modelo
lb4 model

# Criar datasource
lb4 datasource

# Criar repository
lb4 repository

# Criar controller
lb4 controller

# Criar relação
lb4 relation
```

**Backoffice:**

```bash
# Desenvolvimento
npm run dev

# Build para produção
npm run build

# Preview da build
npm run preview
```

### Anexo B: Variáveis de Ambiente

**API (.env):**

```
NODE_ENV=development
PORT=3000
DB_HOST=localhost
DB_PORT=3306
DB_USER=caruser
DB_PASSWORD=carpassword
DB_DATABASE=carmaintenance
```

**Backoffice (.env):**

```
VITE_API_URL=http://localhost:3000/api
```

### Anexo C: Estrutura da Base de Dados

Ver script SQL completo em: `docker/mysql/init.sql`

### Anexo D: Screenshots

Ver pasta: `doc/images/`

- dashboard.png
- customer-detail.png
- vehicles-list.png
- maintenance.png
- mechanics.png
- service-type.png

---

**Fim do Relatório**

---

**Grupo 33 - inf25dw1g33**

**Universidade da Maia**

**Desenvolvimento Web I - 2025/26**

---

[← Capítulo 3: Produto](c3.md) | [Voltar ao README](../README.md)
